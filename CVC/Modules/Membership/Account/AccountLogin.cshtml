@using System.Web.Mvc.Html
@{

    ViewData["Title"] = "Login";
    ViewData["PageId"] = "Login";
    Layout = MVC.Views.Shared._LayoutSlim;
}

@section Head {
    @Html.Script("~/Scripts/vegas/vegas.js")
    <script type="text/javascript">@Html.Raw(DynamicScriptManager.GetScriptText("Form.Membership.Login"))</script>
    <script type="text/javascript">@Html.Raw(Html.GetLocalTextContent("Login"))</script>
    @Html.Stylesheet("~/Scripts/vegas/vegas.css")

    <script src="~/Scripts/jquery.keyboard.js"></script>
    <link href="~/Content/site/keyboard.css" rel="stylesheet" />
    <style type="text/css">
        body {
          font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
          font-size: 13px;
          color: #000;
          -ms-overflow-style: scrollbar;
        }

        #LoginPanel {
            padding: 30px 20px;
            width: 550px;
            margin: 90px auto auto auto;
            background: rgba(0,0,0,0.5);
            border-radius: 12px;
            font-weight: 700;
        }

        #LoginPanel .caption {
            width: 180px;
        }

       #LoginPanel .logo {
            margin: 0 auto 20px auto;
            width: 200px;
            height: 100px;
            background: transparent url(data:image/png;base64,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) no-repeat center center;
        }

       #LoginPanel h3 {
            font-size: 18px;
            font-weight: 700;
            margin: 16px 0 24px;
            color: #f5f27e;
            text-align: center;
            text-shadow: 0 1px 1px #333;
        }

       #LoginPanel .buttons {
            text-align: right;
            padding: 8px 0 4px 0;
            margin-right: 28px;
        }

        #LoginPanel .btn {
                padding: 8px 24px;
                font-weight: 700;
        }

       #LoginPanel .caption {
            color: #ececec;
            font-weight: 700;
            text-shadow: 0 1px 1px #333;
        }

       #LoginPanel .actions {
            padding-right: 28px;
        }

        #LoginPanel .actions a {
            color: #ececec;
            padding: 2px 2px 2px 2px;
            margin-top: 5px;
            display: block;
            float: right;
            clear: both;
            border-bottom: 1px dashed #999;
            text-shadow: 0 1px 1px #333;
        }

        #LoginPanel .actions a i {
            font-weight: 700;
            margin-right: 4px;
        }

        #LoginPanel .s-Form label.error {
            background-image: url(@Url.Content("~/Content/serenity/images/cross.png"));
            padding: 26px 0 0 22px;
        }

        #LoginPanel .s-Form label.error.checked {
            background-image: none;
        }

        #LoginPanel .s-Form .field {
            padding: 8px;
        }

        #LoginPanel .s-Form input {
            padding: 6px 10px;
            border: none;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
        }

        #LoginPanel .s-Form .caption {
            padding: 6px 10px;
            color: #fff;
        }

        #LoginPanel a {
            color: aqua;
        }

        #LoginPanel .s-PropertyGrid .categories {
            height: auto;
        }

        #LoginPanel .flex-layout .s-PropertyGrid {
            display: block;
        }


        .loader {
			position: fixed;
			background: rgba(255, 255, 255, 0.5);
			left: 0;
			top: 0;
			bottom: 0;
			right: 0;
			z-index: 9999;
			overflow: hidden;
			/* height: 100%;
			width: 100%; */
		}

		.loadingmainwrap {
			transform: translate(-50%, -45%);
			left: 50%;
			top: 45%;
			position: absolute;
			width: 120px;
			height: 120px;
			background: #fff;
			border-radius: 360px;

		}

		.loadingwrap,
		.loadinglogo {
			transform: translate(-50%, -50%);
			left: 50%;
			top: 50%;
			position: absolute;
		}

		.loadingwrap svg {
			width: 100%;
			height: 100%;
		}

		.loadingwrap {
			width: 100%;
			height: 100%;
		}

		.loadinglogo {
			width: 70%;
		}

		.loadinglogo img {
			max-width: 100%;
		}

		.loadercircle {
			border: 5px solid #006bd5;
			border-top: 5px solid #e40000;
			border-radius: 50%;
			width: 100%;
			height: 100%;
			animation: spin 2s linear infinite;
            background-color:#fff;
		}

		@@keyframes spin {
			0% {
				transform: rotate(0deg);
                border-radius:0%;
			}
			100% {
				transform: rotate(360deg);
                border-radius:100%;
			}
		}

        @@media(max-width: 550px), (max-height: 500px) {
            #LoginPanel {
                padding: 16px 4px 16px 4px;
                position: absolute;
                margin: 0;
                width: auto;
                top: 10px;
                left: 10px;
                right: 10px;
            }
        }
    </style>
}

<script id="Template_LoginPanel" type="text/template">
    <div class="flex-layout">
        <div class="logo" style="background-image: url(../Content/site/images/cvcTransLogo.png);"></div>
        <h3>
            @Texts.Forms.Membership.Login.FormTitle
        </h3>

        <form id="~_Form" action="">

            <div class="s-Form" style="height: 140px;">
                <div class="fieldset ui-widget ui-widget-content ui-corner-all">
                    <div id="~_PropertyGrid"></div>
                    <div class="clear"></div>
                </div>


                @*<div class="actions">
                            <span style="color:white;">Software Version : <label id="lblSoftwareVersion"></label></span>
                        <div class="clear"></div>
                    </div>*@
                @*<div style="text-align:center">
                        <input type="checkbox" id="chkUser" value="AD" />Is AD

                    </div>*@
            </div>
            <div class="buttons">
                <button id="LoginButton" type="submit" class="btn btn-primary">
                    @Texts.Forms.Membership.Login.SignInButton
                </button>
                <button id="btnShutDownPC" onclick="checkUserAccess('ShutDown PC');" type="button" class="btn btn-primary">
                    ShutDown PC
                </button>
                <button id="btnRestartPC" onclick="checkUserAccess('Restart PC');" type="button" class="btn btn-primary">
                    Restart PC
                </button>
            </div>
            <div class="actions">
                <a href="@Url.Content("~/Account/ForgotPassword")"><i class="fa fa-angle-right"></i>&nbsp;@Texts.Forms.Membership.Login.ForgotPassword</a>
                @* <a href="@Url.Content("~/Account/SignUp")"><i class="fa fa-angle-right"></i>&nbsp;@Texts.Forms.Membership.Login.SignUpButton</a>*@
                <div class="clear"></div>
            </div>
            <div class="actions">
                <span style="color:white;"> <label style="font-weight:bold">Software : </label> CVC IPC App&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;      Version : <label id="lblSoftwareVersion">2.0</label></span>
                <div class="clear"></div>
            </div>
        </form>
    </div>

    <div class="loader hidden" style="/* display: none; */">
        <div class="loadingmainwrap" id="loadingmainwrap">
            <div class="loadingwrap">
                <div class="loadercircle"></div>
            </div>
            <div class="loadinglogo">
                <img src="../Content/site/images/cvcTransLogo.png">
            </div>
        </div>
    </div>
</script>

@if (SiteInitialization.SkippedMigrations)
{
    <div class="alert alert-error alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <h4><i class="icon fa fa-warning"></i> Warning!</h4>
        CVC skipped running migrations to avoid modifying an arbitrary database.
        If you'd like to run migrations on this database, remove the safety check
        in SiteInitialization.RunMigrations method.
    </div>
}

@if (ViewData["Activated"] != null)
{
    <div class="alert alert-info alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <h4><i class="icon fa fa-info"></i>@LocalText.Get("Dialogs.InformationTitle")</h4>
        @Texts.Forms.Membership.SignUp.ActivationCompleteMessage
    </div>
}

<div class="page-content">
    <div id="LoginPanel">

    </div>
</div>


<div class="modal fade" id="hauv">
    <div class="modal-dialog">
        <div class="modal-content bg-warning">
            <div class="modal-header">
                <h4 class="modal-title">Warning Modal</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>One fine body&hellip;</p>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-outline-dark" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-outline-dark">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade" id="nrgmodal" role="dialog" data-backdrop="static" style="top:150px">
    <div class="modal-dialog modal-sm">

        <div class="modal-content" style="width:500px">
            <div class="modal-header">
                <h4 class="modal-title;" style="text-align: center;background-color: #3c8dbc;color: white;margin: 0;padding: 10px;"><span style="font-size:medium;text-align:center ">Comment</span></h4>
            </div>
            <div class="modal-body" style="width:500px">
                <div class="form-group-wrap">
                    <div class="form-group">

                    </div>
                    <div class="form-group" id="divComment_CommentModal" style="display:none">
                        <label>Comment :</label>
                        <textarea id="txtComment_CommentModal" class="form-control AddKeypad" style="display:none"></textarea>
                        @*<input type="text"id="txtComment_CommentModal"  class="form-control"/>*@

                    </div>
                </div>


            </div>
            <div class="modal-footer">
                <button type="button" id="btnSave_CommentModal" class="btn btn-primary">Submit</button>
                <button type="button" id="btnCancel_CommentModal" class="btn btn-danger" data-dismiss="modal" onclick="CancelModalPopUp_CommentAuthentication();">Cancel</button>

                @*<a href="@Url.Action("SaveComments", "AlarmMachine")" class="btn btn-default graybtn backbtn">Save</a>*@
            </div>
        </div>
    </div>
</div>
@Html.Partial("~/Views/PartialViews/Message_PartialView.cshtml")

<script src="~/Scripts/sweetalert.min.js"></script>
<script type="text/javascript">
    var mah = "mysecurity";
    var redirectUrlAfterLogin = "";

    function ShutDown() {

            if (confirm("Are you sure you want to ShutDown?")) {
                $.ajax({
                    url: Q.resolveUrl('~/Common/PCShutDown1'),
                    type: 'GET',
                    async: true,
                    success: function (data) {
                    },
                    error: function (x, y, z) {
                    }
                });
            }
            else {
                return false;
            }
        
    }

    function RestartPC() {
        debugger;
       
            if (confirm("Are you sure you want to Restart?")) {
                $.ajax({
                    url: Q.resolveUrl('~/Common/RestartPC1'),
                    type: 'GET',
                    async: true,
                    success: function (data) {
                    },
                    error: function (x, y, z) {
                    }
                });
            }
            else {
                return false;
            }
        
    }

    function checkUserAccess(type) {

        var userName = $("#Serenity_PropertyPanel0_Username").val();
        var passWord = $("#Serenity_PropertyPanel0_Password").val();

        if (userName == "" || passWord == "") {
            autoAcceptUntrustedCertificatesForOpcUaClient = false;
            redirectUrlAfterLogin = false;
            $("#infoModalBody").text("Please enter UserName and Password");
            $("#modal-info").modal('show');
            return false;
        }

        $.ajax({
            url: Q.resolveUrl('~/Common/CheckUserAccess'),
            type: 'GET',
            data: {
                "userName": userName, "password": passWord, "type": type
            },
            success: function (response) {
                debugger;
                if (!response.isStatus) {
                    autoAcceptUntrustedCertificatesForOpcUaClient = false;
                    redirectUrlAfterLogin = false;

                    $("#infoModalBody").text(response.message);
                    $("#modal-info").modal('show');
                }
                else {
                    if (type == "Restart PC") {
                        RestartPC();
                    }
                    else {
                        ShutDown()
                    }
                }
            },
            error: function (x, y, z) {
            }
        });

    }



var LoginPanel = (function (_super) {
    __extends(LoginPanel, _super);
    function LoginPanel(container) {
        var _this = _super.call(this, container) || this;

        $(function () {
            $('body').vegas({
                delay: 30000,
                cover: true,
                overlay: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACAQMAAABIeJ9nAAAAA3NCSVQICAjb4U" +
                    "/gAAAABlBMVEX///8AAABVwtN+AAAAAnRSTlMA/1uRIrUAAAAJcEhZcwAAAsQAAALEAVuRnQsAAAAWdEVYdENyZWF0" +
                    "aW9uIFRpbWUAMDQvMTMvMTGrW0T6AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAAAxJREFUCJljaGBgAAABhACBrONIPgAAAABJRU5ErkJggg==",
                slides: [
                    { src: @Html.Raw(ContentHashCache.ResolveWithHash("~/Content/site/slides/sl1.jpg").ToJson()), transition: 'fade' },
                    { src: @Html.Raw(ContentHashCache.ResolveWithHash("~/Content/site/slides/sl2.jpg").ToJson()), transition: 'zoomOut' },
                    { src: @Html.Raw(ContentHashCache.ResolveWithHash("~/Content/site/slides/sl3.jpg").ToJson()), transition: 'swirlLeft' }
                ]
            });
            $('#LoginButton').click(function (e) {

                e.preventDefault();
                if (!_this.validateForm()) {
                    return;
                }
                $('.loader').removeClass('hidden');
                var request = _this.getSaveEntity();
                Q.serviceCall({
                    url: Q.resolveUrl('~/Account/Login'),
                    request: request,
                    onSuccess: function (response) {
                        // console.log(response);                            

                        $('.loader').addClass('hidden');
                       
                        //if (response.Message.contains("Password will expire") == true) {
                            
                        //    redirectUrlAfterLogin="~/Account/changePassword";
                        //}
                        if (response.MessageType == "NA") {
                            window.location.href = Q.resolveUrl("~/SettingsMachine");
                        }
                        if (response.Message.indexOf("Password will expire") != -1) {
                            autoAcceptUntrustedCertificatesForOpcUaClient = false;
                            redirectUrlAfterLogin = "~/Account/changePassword";
                        }
                        if (response.Message.indexOf("Password Need") != -1) {
                            autoAcceptUntrustedCertificatesForOpcUaClient = false;
                            redirectUrlAfterLogin = "~/Account/changePassword";
                        }
                        
                        if (response.MessageType == "Alert Message") {
                            debugger;
                            $("#infoModalBody").text(response.Message);
                            $("#modal-info").modal('show');
                        }
                        if (response.MessageType == "Warning Message") {
                            debugger;
                            $("#warningModalBody").text(response.Message);
                            $("#modal-warning").modal('show');
                        }
                        if (response.MessageType == "Success Message") {
                            debugger;
                            $("#successModalBody").text(response.Message);
                            $("#modal-success").modal('show');
                        }
                        if (response.MessageType == "Error Message")
                        {
                            debugger;
                            $("#ErrorModalBody").text(response.Message);
                            $("#modal-danger").modal('show');
                        }
                        
                       // $("#nrgmodal").modal('show');
                       // $("#hauv").modal({ show: true });
                        //var q = Q.parseQueryString();
                        //var user = Q.getRemoteData('UserData');
                        debugger;
                        //if (response.MessageType == "PasswordExpiryNotification" || response.MessageType == "DatabaseLimitNotification") {
                        //    swal({
                        //        title: "Alert!",
                        //        text: response.Message,
                        //        type: "warning"
                        //    }).then(function () {
                        //        window.location.href = Q.resolveUrl("~/SettingsMachine");
                        //    });

                        //}
                        //else {

                        //    window.location.href = Q.resolveUrl("~/SettingsMachine");

                        //}
                        //if (response.MessageType != 'Active Directory Connection succeeded') {


                        //}
                        //else {

                        //    alert("Active Directory Connection succeeded");
                        //}

                        //var name = response.Username;

                        //if (name != 'admin') {
                        //    window.location.href = Q.resolveUrl("~/ADSettingsMachine");
                        //}
                        //else {
                            //window.location.href = Q.resolveUrl("~/SettingsMachine");
                        //}

                        //if (name == "admin")
                        //{
                        //    window.location.href = Q.resolveUrl("~/LabelingMachine");
                        //    //window.location.href = Q.resolveUrl("~/");
                        //}
                        //else
                        //{
                        //    window.location.href = Q.resolveUrl("~/");
                        //    window.location.href = Q.resolveUrl("~/LabelingMachine");
                        //}


                            //var returnUrl = q['returnUrl'] || q['ReturnUrl'];
                            //if (returnUrl) {
                            //    var hash = window.location.hash;
                            //    if (hash != null && hash != '#')
                            //        returnUrl += hash;
                            //    window.location.href = returnUrl;
                            //}
                            //else {
                        //alert(name);
                            //window.location.href = Q.resolveUrl('~/Common/MachineDashboard');
                        //}
                    },
                    onError: function (response) {
                        $('.loader').addClass('hidden');
                        Q.ErrorHandling.showServiceError(response.Error);
                        if (response.Error.Message.indexOf("Expired") != -1) {
                            setTimeout(function () {
                                window.location.href = Q.resolveUrl("~/Account/changePassword");
                            }, 3000);
                        }
                        if (response.Error.Message.indexOf("Password Need to Change") != -1) {
                            setTimeout(function () {
                                window.location.href = Q.resolveUrl("~/Account/changePassword");
                            }, 3000);
                        }
                    }
                });

            });
            //function GetSoftwareVersion() {
            //    var machine = '{MachineId:2}';
            //    jQuery.support.cors = true;
            //    $.ajax({
            //        url: '../api/PLCToHMI/PLCVersion',
            //        data: machine,
            //        type: 'POST',
            //        dataType: 'json',
            //        success: function (plcversion) {
            //            //WriteResponse(data);
            //            //alert(plcversion);
            //            $("#lblSoftwareVersion").html(plcversion);
            //        },
            //        error: function (x, y, z) {
            //            alert(x + '\n' + y + '\n' + z);
            //        }
            //    });
            //}
            //GetSoftwareVersion();
        });
        return _this;
    }
    LoginPanel.prototype.getTemplateName = function () { return 'LoginPanel'; };
    LoginPanel.prototype.getFormKey = function () { return "Membership.Login"; };
    return LoginPanel;
}(Serenity.PropertyPanel));

jQuery(function() {
    new LoginPanel($('#LoginPanel')).init();

@if (ViewData["Activated"] != null)
{
    <text>
    $(function() {
        $('#Username').val(@Html.Raw(Serenity.JSON.Stringify(ViewData["Activated"])));
        $('#Password').focus();
    });
    </text>
}
    });

    $(document).ready
        (function () {

            //$('input')
            $('input[type="text"], input[type="password"]')
                .keyboard({
                    layout: 'custom',
                    customLayout: {
                        'normal': [
                            '` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
                            '{tab} q w e r t y u i o p [ ] \\',
                            'a s d f g h j k l ; \' {accept}',
                            '{shift} z x c v b n m , . / {shift}',
                            ' {space} {left} {right}'
                        ],
                        'shift': [
                            '~ ! @@ # $ % ^ & * ( ) _ + {bksp}',
                            '{tab} Q W E R T Y U I O P { } |',
                            'A S D F G H J K L : " {accept}',
                            '{shift} Z X C V B N M < > ? {shift}',
                            ' {space} {left} {right}'
                        ]
                    },
                })
                // activate the typing extension
                .addTyping({
                    showTyping: true,
                    delay: 250
                })

                //  .addTyping()

                .addCaret({
                    caretClass: '',
                    // *** for future use ***
                    // data-attribute containing the character(s) next to the caret
                    charAttr: 'data-character',
                    // # character(s) next to the caret (can be negative for RTL)
                    // default is 1 which shows the character to the right of the caret
                    // setting this to -1 shows the character to the left
                    charIndex: -1,
                    // tweak caret position & height
                    offsetX: 0,
                    offsetY: 0,
                    adjustHt: 0
                });


            // Typing Extension
            $('.icon').click(function () {
                var kb = $(this).prev().getkeyboard();
                // typeIn( text, delay, callback );
                kb.reveal().typeIn(simulateTyping, 500, function () {
                    // do something after text is added
                    // kb.accept();
                });
            });
        });


        //$('input').each(function () {
        //    var keypara = [
        //        '1 2 3 4 5 6 7 8 9 0',
        //        'a b c d e f g h i j k l m',
        //        'n o p q r s t u v w x y z',
        //        'A B C D E F G H I J K L M',
        //        'N O P Q R S T U V W X Y Z',
        //        '@@ # $ % & ',
        //        '{bksp}',
        //        '{a} {c}'
        //    ];

        //    //if ($(this).attr("AllowDecimalPoint") != undefined) {
        //    //    keypara = [
        //    //        '7 8 9',
        //    //        '4 5 6',
        //    //        '1 2 3',
        //    //        '{bksp} . - 0 ',
        //    //        '{a} {c}'
        //    //    ];
        //    //}

        //    //if ($(this).attr("AllowMinusPoint") != undefined) {
        //    //    keypara = [
        //    //        '7 8 9',
        //    //        '4 5 6',
        //    //        '1 2 3',
        //    //        '{bksp} - 0 ',
        //    //        '{a} {c}'
        //    //    ];
        //    //}

        //    $(this).keyboard({
        //        layout: 'custom',
        //        customLayout: {
        //            'normal': keypara
        //        },
        //        maxLength: 20,
        //        // Prevent keys not in the displayed keyboard from being typed in
        //        restrictInput: true,
        //        // include lower case characters (added v1.25.7)
        //        //restrictInclude: 'a b c d e f',
        //        // don't use combos or A+E could become a ligature
        //        useCombos: false,
        //        // activate the "validate" callback function
        //        acceptValid: true,
        //        validate: function (keyboard, value, isClosing) {
        //            // only make valid if input is 6 characters in length
        //            //var min = $(keyboard)[0].el.min;
        //            //var max = $(keyboard)[0].el.max;
        //            //if (parseFloat(value) > parseFloat(max)) {
        //            //    //Q.alert("Value Cannot be greater than " + max);
        //            //    return false;
        //            //}
        //            //if (parseFloat(value) < parseFloat(min)) {
        //            //    //Q.alert("Value Cannot be less than " + min);
        //            //    return false;
        //            //}

        //            return true;
        //        }
        //    });
        //});

    //$("input").blur(function () {
    //    alert("This input field has lost its focus.");
    //});

</script>
